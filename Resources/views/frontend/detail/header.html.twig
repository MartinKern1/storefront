{% sw_extends '@Storefront/frontend/index/header.html.twig' %}

{# Meta title #}
{% block frontend_index_header_title %}
    {% spaceless %}
        {% set product = page.productDetail.product %}
        {% if page.productDetail.product.metaTitle %}{{ page.productDetail.product.metaTitle|escape('html')}} | {{ shopware.config.shopName|escape('html') }}{% else %}{{ page.productDetail.product.name }} | {{ parent() }}{% endif %}
    {% endspaceless %}
{% endblock %}

{# Meta opengraph tags #}
{% block frontend_index_header_meta_tags_opengraph %}
    {# @var product \Shopware\Core\Content\Product\Storefront\StorefrontProductEntity #}

    {% set product = page.productDetail.product %}
    <meta property="og:type" content="product" />
    <meta property="og:site_name" content="{{ shopware.config.shopName|escape('html') }}" />
    {% set url = path('frontend.detail.page', { 'id' : page.productDetail.product.id }) %}
    {% if page.productDetail.product.extension('canonicalUrl') %}
        {% set url = page.productDetail.product.extension('canonicalUrl').url %}
    {% endif %}

    <meta property="og:url" content="{{ url }}" />
    <meta property="og:title" content="{{ product.name|escape('html') }}" />
    <meta property="og:description" content="{{ product.descriptionLong|escape('html') }}" />
    <meta property="og:image" content="{{ product.cover.media.url }}" />
    <meta property="product:brand" content="{{ product.manufacturer.name|escape('html') }}" />
    <meta property="product:price" content="{{ product.calculatedPrice.totalPrice }}" />
    <meta property="product:product_link" content="{{ url }}" />

    <meta name="twitter:card" content="product" />
    <meta name="twitter:site" content="{{ shopware.config.shopName|escape('html') }}" />
    <meta name="twitter:title" content="{{ product.name|escape('html') }}" />
    <meta name="twitter:description" content="{{ product.descriptionLong|escape('html') }}" />
    <meta name="twitter:image" content="{{ product.cover.media.url }}" />
{% endblock %}

{# Keywords #}
{% block frontend_index_header_meta_keywords %}
    {% spaceless %}
        {# @var product \Shopware\Core\Content\Product\Storefront\StorefrontProductEntity #}
        {% if page.productDetail.product.keywords %}
            {{ page.productDetail.product.keywords|escape('html') }}
        {% endif %}
    {% endspaceless %}
{% endblock %}

{# Description #}
{# @var product \Shopware\Core\Content\Product\Storefront\StorefrontProductEntity #}
{% block frontend_index_header_meta_description %}
    {% spaceless %}
        {% if page.productDetail.product.description  %}
            {{ page.productDetail.product.description|escape('html') }}
        {% else %}
            {{ page.productDetail.product.descriptionLong|escape('html') }}
        {% endif %}
    {% endspaceless %}
{% endblock %}

{# Canonical link #}
{% block frontend_index_header_canonical %}
    {# @var url \Shopware\Core\Api\Seo\Struct\SeoUrlEntity #}
    {% set url = page.productDetail.product.extension('canonicalUrl') %}

    <link rel="canonical" href="{{ url.url }}" />
{% endblock %}
