{% sw_extends '@Storefront/page/checkout/_page.html.twig' %}

{% block page_checkout_container %}
	{% block page_checkout_confirm_info %}
		<div class="row confirm-info">
			{% block page_checkout_confirm_address %}
				<div class="col-md-8 confirm-address">
					{% sw_include '@Storefront/page/checkout/confirm/confirm-address.html.twig' %}
				</div>
			{% endblock %}

			{% block page_checkout_confirm_payment %}
				<div class="col-md-4 confirm-payment">
					{% sw_include '@Storefront/page/checkout/confirm/confirm-payment.html.twig' %}
				</div>
			{% endblock %}
		</div>
	{% endblock %}

	{{ parent() }}
{% endblock %}

{% block page_checkout_main_content %}
	{% block page_checkout_confirm %}
		{% block page_checkout_confirm_table %}
			<div class="card cart-table confirm-table">
				<div class="card-body">
					{% block page_checkout_confirm_table_header %}
						{% sw_include '@Storefront/page/checkout/confirm/confirm-header.html.twig' %}
					{% endblock %}

					{% block page_checkout_confirm_items %}
						{% for lineItem in page.cart.lineItems.elements %}
							{% block page_checkout_confirm_item %}
								{% sw_include '@Storefront/page/checkout/confirm/confirm-item.html.twig' %}
							{% endblock %}
						{% endfor %}
					{% endblock %}
				</div>
			</div>
		{% endblock %}
	{% endblock %}
{% endblock %}

{% block page_checkout_sidebar_actions %}
	{#TODO: NEXT-1947 - messages (errors, laststock, invalid address)#}

	{% block page_checkout_sidebar_actions_confirm_submit %}
		<form id="confirmForm"
		      action="{{ path('storefront-api.checkout.order.create', {'version': '1'}) }}"
		      data-finish-url="{{ path('frontend.checkout.finish.page') }}"
		      method="post">
			<button class="btn btn-primary btn-block btn-lg" type="submit">
				{{ "checkout.confirmSubmit"|trans }}
			</button>
		</form>
	{% endblock %}
{% endblock %}
