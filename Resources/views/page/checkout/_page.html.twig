{% sw_extends '@Storefront/base.html.twig' %}

{% block base_flashbags %}{% endblock %}

{% block base_content %}
    {% block page_checkout %}
        <div class="checkout is-{{ controllerAction }}">
            {% block page_checkout_container %}
                <div class="checkout-container">
                    {% block page_checkout_main %}
                        <div class="checkout-main">
                            {% block base_flashbags_checkout %}
                                <div class="flashbags">
                                    {% for type, messages in app.flashes %}
                                        {% sw_include '@Storefront/utilities/alert.html.twig' with { type: type, list: messages } %}
                                    {% endfor %}
                                </div>
                            {% endblock %}
                            
                            {% block page_checkout_main_content %}{% endblock %}
                        </div>
                    {% endblock %}

                    {# todo NEXT-1949 #}
                    {#{% if not page.context.customer %}#}
                        {#<form name="precalc" method="post" action="{{ path('frontend.checkout.configure') }}">#}
                            {#<input type="hidden" name="redirectTo" value="frontend.checkout.cart.page">#}
                            {#<select name="countryId">#}
                                {#{% for country in page.countries %}#}
                                    {#<option value="{{ country.id }}"{% if country.id == page.context.shippingLocation.countryId %} selected="selected"{% endif %}>{{ country.translated.name }}</option>#}
                                {#{% endfor %}#}
                            {#</select>#}
                            {#<select type="text" name="paymentMethodId">#}
                                {#{% for payment in page.paymentMethods %}#}
                                    {#<option value="{{ payment.id }}"{% if payment.id == page.context.paymentMethod.id %} selected="selected"{% endif %}>{{ payment.translated.name }}</option>#}
                                {#{% endfor %}#}
                            {#</select>#}
                            {#<select type="text" name="shippingMethodId">#}
                                {#{% for shipping in page.shippingMethods %}#}
                                    {#<option value="{{ shipping.id }}"{% if shipping.id == page.context.shippingMethod.id %} selected="selected"{% endif %}>{{ shipping.translated.name }}</option>#}
                                {#{% endfor %}#}
                            {#</select>#}
                            {#<input type="hidden" name="redirectTo" value="frontend.checkout.cart.page">#}
                            {#<button type="submit">calculateShippingCosts</button>#}
                        {#</form>#}
                    {#{% endif %}#}

                    {% block page_checkout_aside %}
                        <div class="checkout-aside js-reload-on-confirm-change">
                            {% block page_checkout_aside_container %}
                                <div class="checkout-aside-container">
                                    {% block page_checkout_aside_summary %}
                                        <div class="checkout-aside-summary">
                                            {% block page_checkout_summary_header %}
                                                <h2 class="checkout-summary-header">
                                                    {{ "checkout.summaryHeader"|trans }}
                                                </h2>
                                            {% endblock %}

                                            {% block page_checkout_summary_list %}
                                                <div class="checkout-summary-list">
                                                    {% block page_checkout_summary_list_container %}
                                                        {% sw_include '@Storefront/page/checkout/summary.html.twig' %}
                                                    {% endblock %}
                                                </div>
                                            {% endblock %}
                                        </div>
                                    {% endblock %}

                                    {% block page_checkout_aside_actions %}{% endblock %}
                                </div>
                            {% endblock %}
                        </div>
                    {% endblock %}
                </div>
            {% endblock %}
        </div>
    {% endblock %}
{% endblock %}
